import React from "react";
import { motion, AnimatePresence } from "framer-motion";

const phaseData = {
  "1. ุงูุชุฎุทูุท ูุชุญููู ุงููุชุทูุจุงุช": [
    { name: "ุงููุฏู: ูุถุน ุฃุณุงุณ ุงููุดุฑูุน ูุจู ุฃู ุจุฑูุฌุฉ", icon: "๐ฏ", tasks: ["ุชุญุฏูุฏ ุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ ูููุธุงู.", "ุชุญููู ุงูุฌูููุฑ ุงููุณุชูุฏู.", "ูุถุน ุฎุทุฉ ุนูู ุฃูููุฉ."] },
    { name: "ุชุญุฏูุฏ ููุน ุงููุธุงู", icon: "โ๏ธ", tasks: ["ุจูุงุก ูุธุงู ููุงุท ุจูุน (POS) ูุชูุงูู.", "ุชุทููุฑ ุดุงุดุฉ ุนุฑุถ ูููุทุจุฎ (KDS) ูุชุชุจุน ุงูุทูุจุงุช.", "ุฅูุดุงุก ุชุทุจูู ููุจ ุชูุฏูู (PWA) ููุนููุงุก ููุทูุจ ูุงูุชูุตูู.", "ุชุตููู ููุญุฉ ุชุญูู ูุฅุฏุงุฑุฉ ุงููุทุงุนู ูููุญุฉ ุชุญูู ุนููุง ูุฅุฏุงุฑุฉ ุฌููุน ุงูุนููุงุก."] },
    { name: "ุชุญุฏูุฏ ููุน ุงูู Multi-Tenant", icon: "๐ข", tasks: ["ุงูุงุฎุชูุงุฑ ุจูู ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ููู ุนููู (Database per Tenant) ูุถูุงู ุงูุนุฒู ุงูุชุงูุ ุฃู ูุงุนุฏุฉ ุจูุงูุงุช ูุดุชุฑูุฉ ูุน `Tenant ID` ูุณูููุฉ ุงูุฅุฏุงุฑุฉ."] },
    { name: "ุฑุณู ุงูู User Flow ููู ุฏูุฑ", icon: "๐", tasks: ["ุชุตููู ุฑุญูุฉ ุงููุณุชุฎุฏู ููุนููู (Customer) ููุฐ ุฏุฎููู ุงูุชุทุจูู ูุญุชู ุงุณุชูุงู ุงูุทูุจ.", "ุชุญุฏูุฏ ุฎุทูุงุช ุฑุฌู ุงูุชูุตูู (Delivery Guy).", "ูุงุฌูุงุช ูุฏูุฑ ุงููุทุนู (Manager) ููุชุงุจุนุฉ ุงูุฃุฏุงุก.", "ุตูุงุญูุงุช ุงูุฃุฏูู (Admin) ููู ูุทุนู.", "ูุงุฌูุฉ ุงูุณูุจุฑ ุฃุฏูู (Super Admin) ููุชุญูู ุงููุงูู."] },
    { name: "ุงุฎุชูุงุฑ ุงูุชูููุงุช", icon: "๐ป", tasks: ["ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend): ุงุณุชุฎุฏุงู React ุฃู Next.js ูุน Tailwind CSS ูุชุตููู ูุฑู.", "ุงููุงุฌูุฉ ุงูุฎูููุฉ (Backend): ุจูุงุก API ููู ุจุงุณุชุฎุฏุงู Node.js ูุน NestJS.", "ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database): ุงูุงุนุชูุงุฏ ุนูู PostgreSQL ูููุฉ ุงูุนูุงูุงุช ุฃู MongoDB ููุฑููุฉ ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช.", "ุจูุงุจุงุช ุงูุฏูุน (Payments): ุฏูุฌ Stripe ู PayPal ูุน ุจูุงุจุงุช ุฏูุน ูุญููุฉ.", "ุงูุฅุดุนุงุฑุงุช (Notifications): ุงุณุชุฎุฏุงู Firebase ููููุจุงูู ู Twilio ููู SMS."] }
  ],
  "2. ุชุตููู ุงูู Database ู ุงูู Multi-Tenant Architecture": [
    { name: "ุงููุฏู: ูููู ุจูุงูุงุช ูุงุจู ููุชูุณุน", icon: "๐ฏ", tasks: ["ุจูุงุก ุฃุณุงุณ ููู ููุจูุงูุงุช ูุฏุนู ููู ุงููุธุงู ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ."] },
    { name: "ุฌุฏุงูู ุฑุฆูุณูุฉ", icon: "๐๏ธ", tasks: ["ุชุตููู ุฌุฏูู `restaurants` ูุชุฎุฒูู ูุนูููุงุช ูู ูุทุนู.", "ุฌุฏูู `menus` ููููุงุฆู ูุงูุฃุตูุงู.", "ุฌุฏูู `orders` ูุชุชุจุน ุฌููุน ุงูุทูุจุงุช ูุญุงูุงุชูุง.", "ุฌุฏูู `users` ูุญุณุงุจุงุช ุงูุนููุงุก ูุงูููุธููู.", "ุฌุฏูู `roles` ูุชุญุฏูุฏ ุตูุงุญูุงุช ุงููุณุชุฎุฏููู.", "ุฌุฏูู `payments` ูุชุณุฌูู ุนูููุงุช ุงูุฏูุน.", "ุฌุฏูู `notifications` ูุฃุฑุดูุฉ ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ."] },
    { name: "ุฅุถุงูุฉ Tenant ID", icon: "๐", tasks: ["ุฅุถุงูุฉ ุนููุฏ `tenant_id` ูู ูู ุงูุฌุฏุงูู ุงููุชุนููุฉ ุจุจูุงูุงุช ุงูุนููุงุก ูุถูุงู ุนุฒู ุงูุจูุงูุงุช ุจุดูู ูุนุงู ูุขูู."] },
    { name: "ุชุตููู ุงูุนูุงูุงุช", icon: "๐", tasks: ["ุฑุจุท ุงูุฌุฏุงูู ุจุนูุงูุงุช ููุทููุฉ (One-to-Many, Many-to-Many) ูุงุณุชุฎุฏุงู Indexes ูุชุณุฑูุน ุนูููุงุช ุงูุจุญุซ ูุงูุงุณุชุนูุงู."] }
  ],
  "3. ุชุตููู ุงูู UI/UX ูุงููููุฉ": [
    { name: "ุงููุฏู: ูุงุฌูุฉ ุฌุฐุงุจุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู", icon: "๐ฏ", tasks: ["ุงูุชุฑููุฒ ุนูู ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ ูุชุตููู ุฌุฐุงุจ ูุนูุณ ูููุฉ ูู ูุทุนู."] },
    { name: "ูุงุฌูุงุช ุงููุธุงู", icon: "๐ฅ๏ธ", tasks: ["ุชุตููู ูุงุฌูุฉ POS ุชุฏุนู ุดุงุดุงุช ุงูููุณ ูุชุชููุฒ ุจุงูุณุฑุนุฉ ูู ุฅุฏุฎุงู ุงูุทูุจุงุช.", "ุชุตููู ูุงุฌูุฉ KDS ุชุนุฑุถ ุงูุทูุจุงุช ุจูุถูุญ ูุน ุชุญุฏูุซุงุช ูุญุธูุฉ ูุญุงูุฉ ูู ุทูุจ.", "ููุญุฉ ุชุญูู ูููุทุนู ุชุชูุญ ุฅุฏุงุฑุฉ ุณููุฉ ูููุงุฆูุฉุ ูุชุงุจุนุฉ ุญูุฉ ููุทูุจุงุชุ ูุชูุงุฑูุฑ ุฃุฏุงุก ุชูุตูููุฉ."] },
    { name: "PWA ููุฒุจุงุฆู", icon: "๐ฑ", tasks: ["ุชุตููู ุชุทุจูู ููุจ ููุนููุงุก ูุชูุญ ุชุตูุญ ุงููุงุฆูุฉ ุจุณูููุฉุ ุฅุถุงูุฉ ุงูููุชุฌุงุช ููุณูุฉุ ุฅุชูุงู ุนูููุฉ ุงูุฏูุนุ ูุชุชุจุน ุญุงูุฉ ุงูุทูุจ ุฎุทูุฉ ุจุฎุทูุฉ."] },
    { name: "ุชุตููู ุงููููุฉ ุงููุฑูุฉ", icon: "๐จ", tasks: ["ุฅูุดุงุก ูุธุงู ุชุตููู (Theme Config) ูุณูุญ ุจุชุบููุฑ ุงูุฃููุงูุ ุงูุฎุทูุทุ ูุงูุดุนุงุฑ ุจุณูููุฉ ููู ุนููู (ูุทุนู) ุนูู ุญุฏุฉ."] }
  ],
  "4. ุงูุจููุฉ ุงูุฎูููุฉ (Backend API)": [
    { name: "ุงููุฏู: API ุขููุฉ ููุฑูุฉ", icon: "๐ฏ", tasks: ["ุชุทููุฑ ูุงุฌูุฉ ุจุฑูุฌูุฉ (API) ูููุฉุ ุขููุฉุ ููุงุฏุฑุฉ ุนูู ุงูุชุนุงูู ูุน ุฌููุน ุนูููุงุช ุงููุธุงู ุจููุงุกุฉ."] },
    { name: "ุจููุฉ ุงูู API", icon: "๐๏ธ", tasks: ["ุงุณุชุฎุฏุงู REST ุฃู GraphQL API ูุชุฃููููุง ุจุงุณุชุฎุฏุงู JWT (JSON Web Tokens) ูุน Refresh Tokens ูุถูุงู ุตูุงุญูุงุช ุงูุฏุฎูู."] },
    { name: "ุนุฒู ุจูุงูุงุช ุงููุณุชุฃุฌุฑูู", icon: "๐", tasks: ["ุชุทุจูู Middleware ุนูู ูุณุชูู ุงูู API ูููู ุจุงูุชุญูู ูู `tenant_id` ููู ุทูุจ ูุถูุงู ุนุฏู ูุตูู ุฃู ูุทุนู ูุจูุงูุงุช ูุทุนู ุขุฎุฑ."] },
    { name: "ุงูุชุญุฏูุซ ุงููุญุธู", icon: "โก", tasks: ["ุงุณุชุฎุฏุงู WebSockets ุฃู Firebase Realtime Database ูุชูููุฑ ุชุญุฏูุซุงุช ููุฑูุฉ ููุทูุจุงุช ุนูู ุดุงุดุฉ KDS ูุชุทุจููุงุช ุงูุนููุงุก."] },
    { name: "Endpoints ุฑุฆูุณูุฉ", icon: "๐", tasks: ["ุชุทููุฑ Endpoints ูุฅุฏุงุฑุฉ ุนูููุงุช ุงููุตุงุฏูุฉ (Auth)ุ ุงูุทูุจุงุช (Orders)ุ ุงูููุงุฆู (Menu)ุ ุงูุฏูุน (Payments)ุ ูุงูุฅุดุนุงุฑุงุช (Notifications)."] }
  ],
  "5. ุชุทููุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)": [
    { name: "ุงููุฏู: ุชุทุจููุงุช ูุชูุงููุฉ ููู ููุน ูุณุชุฎุฏู", icon: "๐ฏ", tasks: ["ุจูุงุก ูุงุฌูุงุช ูุณุชุฎุฏู ุชูุงุนููุฉ ูุณุฑูุนุฉ ููู ุฏูุฑ ูู ุงููุธุงู."] },
    { name: "POS App", icon: "๐๏ธ", tasks: ["ุชุทููุฑ ุชุทุจูู ููุงุท ุงูุจูุน ูู PWA ููุนูู ุนูู ุฃู ุฌูุงุฒ ุฃู ูุชุทุจูู ุณุทุญ ููุชุจ ุจุงุณุชุฎุฏุงู Electron."] },
    { name: "KDS App", icon: "๐ณ", tasks: ["ุจูุงุก ุชุทุจูู ุดุงุดุฉ ุงููุทุจุฎ ุงูุฐู ูุนุฑุถ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ููุนูุณ ุญุงูุชูุง (ููุฏ ุงูุชุญุถูุฑุ ุฌุงูุฒ) ุจุดูู ููุฑู."] },
    { name: "Admin Dashboard", icon: "๐", tasks: ["ุชุทููุฑ ููุญุฉ ุชุญูู ูููุทุนู ุชุชูุญ ูู ุฅุฏุงุฑุฉ ูู ุฌูุงูุจ ุนููู ูู ูุงุฆูุชู ุฅูู ุชูุงุฑูุฑู ุงููุงููุฉ."] },
    { name: "Super Admin Dashboard", icon: "๐", tasks: ["ุจูุงุก ููุญุฉ ุชุญูู ููุณูุจุฑ ุฃุฏูู ุชููุญู ุงููุฏุฑุฉ ุนูู ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุชุ ุฅุถุงูุฉ ูุทุงุนู ุฌุฏูุฏุฉุ ููุฑุงูุจุฉ ุฃุฏุงุก ุงููุธุงู ููู."] },
    { name: "Customer PWA", icon: "๐คณ", tasks: ["ุชุทููุฑ ุชุทุจูู ุงูุนููู ููุทูุจ ูุงูุฏูุน ูุน ููุฒุงุช ูุซู ุญูุธ ุงูุนูุงูููุ ุณุฌู ุงูุทูุจุงุชุ ูุชุชุจุน ุงูุชูุตูู."] }
  ],
  "6. ุงูุฏูุน ุงูุฅููุชุฑููู ูุงูุฅุดุนุงุฑุงุช": [
    { name: "ุงููุฏู: ุชุฌุฑุจุฉ ุทูุจ ูุชูุงููุฉ", icon: "๐ฏ", tasks: ["ุชูููุฑ ุชุฌุฑุจุฉ ุฏูุน ุณูุณุฉ ูุฅุจูุงุก ุงูุนููู ุนูู ุงุทูุงุน ุฏุงุฆู ุจุญุงูุฉ ุทูุจู."] },
    { name: "ุฏูุฌ ุจูุงุจุงุช ุงูุฏูุน", icon: "๐ณ", tasks: ["ุงูุฑุจุท ูุน ุจูุงุจุงุช ุฏูุน ุนุงูููุฉ ูุซู Stripe ู PayPalุ ุจุงูุฅุถุงูุฉ ุฅูู ุฏุนู ุจูุงุจุงุช ุงูุฏูุน ุงููุญููุฉ ูุชูุจูุฉ ุงุญุชูุงุฌุงุช ุฃุณูุงู ูุฎุชููุฉ."] },
    { name: "ุฅุดุนุงุฑุงุช ุงูุทูุจ", icon: "๐", tasks: ["ุฅุฑุณุงู ุฅุดุนุงุฑุงุช Push ุนุจุฑ Firebase ุนูุฏ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ.", "ุฅุฑุณุงู ุฑุณุงุฆู SMS ุนุจุฑ Twilio ูุชุฃููุฏ ุงูุทูุจ ุฃู ุนูุฏ ุงูุชุฑุงุจ ุงูุชูุตูู.", "ุฅุฑุณุงู ููุงุชูุฑ ูุฅูุตุงูุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (Email)."] }
  ],
  "7. ุงูุงุฎุชุจุงุฑ ูุงูุฌูุฏุฉ": [
    { name: "ุงููุฏู: ุงูุชุฃูุฏ ูู ุงุณุชูุฑุงุฑ ุงููุธุงู", icon: "๐ฏ", tasks: ["ุถูุงู ุฎูู ุงููุธุงู ูู ุงูุฃุฎุทุงุก ูุชูุฏูู ููุชุฌ ููุซูู ูุนุงูู ุงูุฌูุฏุฉ."] },
    { name: "ุฃููุงุน ุงูุงุฎุชุจุงุฑุงุช", icon: "๐ฌ", tasks: ["ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (Unit Tests) ููุชุญูู ูู ูู ุฏุงูุฉ ูู ุงูู API ุจุดูู ูููุตู.", "ุฅุฌุฑุงุก ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู (Integration Tests) ููุชุฃูุฏ ูู ุฃู ุฃุฌุฒุงุก ุงููุธุงู ุชุนูู ูุนูุง ุจุดูู ุตุญูุญ.", "ุชูููุฐ ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก (Load Testing) ููุญุงูุงุฉ ุงูุถุบุท ุงูุนุงูู ุนูู ุงููุธุงู."] },
    { name: "ูุญุงูุงุฉ ุงูุณููุงุฑูููุงุช", icon: "๐ญ", tasks: ["ุงุฎุชุจุงุฑ ุณููุงุฑูููุงุช ูุงูุนูุฉ ูุซู ุงููุทุงุน ุงูุฅูุชุฑูุช ุฃุซูุงุก ุงูุทูุจุ ุงูุชุนุงูู ูุน ุนูููุงุช ุงูุฏูุน ุงููุงุดูุฉุ ูุชุญุฏูุซ ุงููุงุฆูุฉ ุฃุซูุงุก ุนูู ุงููุธุงู."] }
  ],
  "8. ุงููุดุฑ ูุงูุตูุงูุฉ": [
    { name: "ุงููุฏู: ุฅุทูุงู ุงููุธุงู ููุชุงุจุนุชู", icon: "๐ฏ", tasks: ["ูุดุฑ ุงููุธุงู ุนูู ุฎูุงุฏู ุงูุฅูุชุงุฌ ูุถูุงู ุนููู ุจุดูู ูุณุชูุฑ ููุณุชูุฑ."] },
    { name: "ุงููุดุฑ ุงูุชููุงุฆู (CI/CD)", icon: "๐", tasks: ["ุฅุนุฏุงุฏ ูุธุงู CI/CD ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ูุซู Jenkins ุฃู GitHub Actions ููุดุฑ ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ ุจุดูู ุชููุงุฆู ูุขูู."] },
    { name: "ูุฑุงูุจุฉ ุงููุธุงู", icon: "๐", tasks: ["ุงุณุชุฎุฏุงู ุฃุฏูุงุช ูุฑุงูุจุฉ (Monitoring) ูุชุชุจุน ุฃุฏุงุก ุงูุฎูุงุฏู ูุงูุชุดุงู ุงูุฃุฎุทุงุกุ ูุน ุชุณุฌูู ุฌููุน ุงูุฃูุดุทุฉ (Logging) ูุชุณููู ุนูููุฉ ุงูุชุตุญูุญ."] },
    { name: "ุงูุตูุงูุฉ ุงูุฏูุฑูุฉ", icon: "๐๏ธ", tasks: ["ุฌุฏููุฉ ุชุญุฏูุซุงุช ุฃูููุฉ ุฏูุฑูุฉุ ุฃุฎุฐ ูุณุฎ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ูุชุญุณูู ุฃุฏุงุก ุงููุธุงู ุจูุงุกู ุนูู ุจูุงูุงุช ุงููุฑุงูุจุฉ."] }
  ]
};

function PhaseSection({ phase, isOpen, onPhaseClick, expandedCard, onCardClick }) {
  const components = phaseData[phase] || [];

  return (
    <motion.div layout className={`phase-section ${isOpen ? "open" : ""}`}>
      <motion.h2 layout onClick={() => onPhaseClick(phase)}>{phase}</motion.h2>
      <AnimatePresence>
        {isOpen && (
          <motion.div
            className="component-grid"
            initial={{ opacity: 0, height: 0 }}
            animate={{ opacity: 1, height: "auto" }}
            exit={{ opacity: 0, height: 0 }}
            transition={{ duration: 0.5, ease: "easeInOut" }}
          >
            {components.map((comp, idx) => (
              <motion.div
                key={idx}
                layout
                className={`component-card ${expandedCard === comp ? "expanded" : ""}`}
                onClick={() => onCardClick(comp)}
              >
                <div className="component-icon">{comp.icon}</div>
                <div className="component-name">{comp.name}</div>
                  <AnimatePresence>
                    {expandedCard === comp && comp.tasks.length > 0 && (
                      <motion.div
                        className="task-list"
                        initial={{ opacity: 0, height: 0 }}
                        animate={{ opacity: 1, height: "auto" }}
                        exit={{ opacity: 0, height: 0 }}
                        transition={{ duration: 0.3 }}
                      >
                        <ul>
                          {comp.tasks.map((task, taskIdx) => (
                            <li key={taskIdx}>{task}</li>
                          ))}
                        </ul>
                      </motion.div>
                    )}
                  </AnimatePresence>
              </motion.div>
            ))}
          </motion.div>
        )}
      </AnimatePresence>
    </motion.div>
  );
}

export default PhaseSection;
